<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Home Superset Timer (≈35–40 min)</title>
  <style>
    :root {
      --bg: #0b1020;
      --card: #131a33;
      --muted: #8ca0ff;
      --text: #ecf0ff;
      --accent: #71e5bd;
      --danger: #ff7b7b;
      --warn: #ffd36b;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(1000px 600px at 10% -10%, #1d2450, var(--bg));
      color: var(--text);
    }
    .container { max-width: 980px; margin: 0 auto; padding: 24px; }
    header { display:flex; align-items:center; gap:12px; margin-bottom: 16px; }
    h1 { font-size: 28px; margin:0; letter-spacing: 0.2px; }
    .card {
      background: linear-gradient(180deg, #17214a, var(--card));
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 6px 24px rgba(0,0,0,0.35);
      border-radius: 16px; padding: 16px;
    }
    .grid { display:grid; grid-template-columns: 1fr; gap:16px; }
    @media (min-width: 920px){ .grid { grid-template-columns: 1.2fr 0.8fr; } }

    .row { display:flex; gap:12px; flex-wrap: wrap; align-items:center; }
    .seg-name { font-weight: 800; font-size: 18px; }
    .muted { color: var(--muted); opacity: 0.92; }
    .pill { padding: 6px 10px; border-radius: 99px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.08);}

    .controls { display:flex; gap:10px; flex-wrap: wrap; }
    button {
      background: #2a356d; color: var(--text); border: 1px solid rgba(255,255,255,0.12);
      padding: 12px 16px; border-radius: 12px; font-weight: 800; letter-spacing: 0.3px;
      cursor: pointer; transition: transform .06s ease, background .2s ease, box-shadow .2s ease;
      box-shadow: 0 4px 14px rgba(0,0,0,0.25);
    }
    button:hover { transform: translateY(-1px); background:#334092; }
    button:active { transform: translateY(1px); }
    .btn-accent { background: #1f8a68; }
    .btn-warn { background: #8a661f; }
    .btn-danger { background: #7a2e2e; }

    select, input[type="checkbox"] { accent-color: var(--accent); }
    select {
      background: #1b2450; color: var(--text); border: 1px solid rgba(255,255,255,0.12);
      padding: 10px 12px; border-radius: 10px; font-weight:800; letter-spacing: 0.2px;
    }
    label { display:flex; align-items:center; gap:8px; }

    .timer { display:grid; gap: 12px; grid-template-columns: 1fr; align-items: start; }
    .time-display { display:flex; align-items:baseline; gap: 12px; }
    .big { font-size: 58px; font-weight: 900; letter-spacing: 1px; }
    .unit { font-size: 16px; opacity: 0.8; }

    .progress-wrap { background: rgba(255,255,255,0.07); height: 16px; border-radius: 10px; overflow: hidden; border:1px solid rgba(255,255,255,0.08); }
    .progress { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), #7ae3ff); transition: width .2s linear; }

    .stack { display:flex; flex-direction: column; gap:8px; }
    .line { display:flex; align-items:center; justify-content: space-between; gap:8px; }

    .badge { padding: 6px 10px; border-radius: 10px; font-weight: 800; }
    .badge.work { background: rgba(113,229,189,0.15); border:1px solid rgba(113,229,189,0.35); }
    .badge.rest { background: rgba(255,211,107,0.15); border:1px solid rgba(255,211,107,0.35); }
    .badge.other { background: rgba(140,160,255,0.15); border:1px solid rgba(140,160,255,0.35); }

    .list { display:flex; flex-direction:column; gap:10px; }
    .list .item { display:flex; gap:10px; align-items:flex-start; padding: 8px 10px; border-radius: 12px; }
    .dot { width:10px; height:10px; border-radius:50%; background: var(--muted); opacity: 0.9; margin-top: 6px; }

    .small { font-size: 13px; opacity: 0.92; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    .hr { height:1px; background: rgba(255,255,255,0.08); margin: 8px 0; border: none; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7 4h10v3H7V4Zm-3 7h16v3H4v-3Zm3 7h10v3H7v-3Z" fill="#71e5bd"/>
      </svg>
      <h1>Home Superset Timer (Mini‑Band Friendly)</h1>
    </header>

    <div class="grid">
      <section class="card">
        <div class="row" style="justify-content: space-between; gap: 16px;">
          <div class="row" style="gap:12px;">
            <label>
              <span class="muted">Plan</span>
              <select id="planSelect"></select>
            </label>

            <label title="Adds a short conditioning block before arms.">
              <input type="checkbox" id="finisherToggle">
              <span class="muted">Include Conditioning Finisher</span>
            </label>

            <label title="Adds 2 sets each at the end: Seated curls + triceps.">
              <input type="checkbox" id="armsToggle" checked>
              <span class="muted">End With Biceps + Triceps</span>
            </label>
          </div>

          <div class="controls">
            <button id="startBtn" class="btn-accent">▶ Start</button>
            <button id="pauseBtn" class="btn-warn">⏸ Pause</button>
            <button id="resetBtn" class="btn-danger">⟲ Reset</button>
          </div>
        </div>

        <div class="hr"></div>

        <div class="timer">
          <div class="stack">
            <div class="line">
              <div class="seg-name" id="currentTitle">Warm‑up</div>
              <div class="badge other" id="phaseBadge">Other</div>
            </div>

            <div class="small muted" id="currentDetail"></div>

            <div class="time-display">
              <div class="big mono" id="timeLeft">05:00</div>
              <div class="unit">remaining</div>
            </div>

            <div class="progress-wrap"><div id="progressBar" class="progress"></div></div>

            <div class="line small">
              <div>Next: <span id="nextTitle" class="muted">Loading…</span></div>
              <div class="muted">Segment <span id="segIndex">1</span>/<span id="segTotal">—</span></div>
            </div>
          </div>
        </div>
      </section>

      <aside class="card">
        <div class="stack">
          <div class="row" style="justify-content: space-between;">
            <div class="muted">Today’s Recipe</div>
            <div class="pill mono" id="totalTime">00:00 / 00:00</div>
          </div>
          <div class="list" id="segmentList"></div>
        </div>
      </aside>
    </div>

    <p class="small muted" style="margin-top:16px">
      Big-lift pacing tip (squat / RDL / deadlift): don’t rush to hit 12 reps in 60s. Aim <b>8–10 clean reps</b>,
      then use leftover time for a <b>5–10s hold</b> (bottom of squat or hinge hold). Presses can stay slow + paused.
    </p>
  </div>

  <script>
    // ---- Audio (simple generated tones) ----
    function tone(duration=150, frequency=880, type='sine', vol=0.2) {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = type; o.frequency.value = frequency; g.gain.value = vol;
      o.connect(g); g.connect(ctx.destination); o.start();
      setTimeout(()=>{ o.stop(); ctx.close(); }, duration);
    }

    // ---- Helpers ----
    function segment(label, seconds, kind='other', detail='') { return { label, seconds, kind, detail }; }
    function ex(name, detail=''){ return { name, detail }; }

    function transition(seconds=30, label='Transition / Setup', detail='Quick setup, sip water, move on.') {
      return [segment(label, seconds, 'other', detail)];
    }

    // 3 rounds of (A 60s, Rest 30s, B 60s, Rest 30s) with no rest after final B
    function supersetBlock(a, b, work=60, rest=30, rounds=3) {
      const segs = [];
      for (let r=1; r<=rounds; r++) {
        segs.push(segment(`${a.name} — Round ${r}`, work, 'work', a.detail));
        segs.push(segment(`Rest`, rest, 'rest', 'Breathe, shake out.'));
        segs.push(segment(`${b.name} — Round ${r}`, work, 'work', b.detail));
        if (r < rounds) segs.push(segment(`Rest`, rest, 'rest', 'Reset position, start next round.'));
      }
      return segs;
    }

    // Arms: 2 sets each (2 rounds), shorter intervals
    function armsFinisherBlock(curl, tri, work=40, rest=20, sets=2) {
      const segs = [];
      for (let s=1; s<=sets; s++) {
        segs.push(segment(`${curl.name} — Set ${s}`, work, 'work', curl.detail));
        segs.push(segment(`Rest`, rest, 'rest', 'Relax grip, quick reset.'));
        segs.push(segment(`${tri.name} — Set ${s}`, work, 'work', tri.detail));
        if (s < sets) segs.push(segment(`Rest`, rest, 'rest', 'Shake out, start set 2.'));
      }
      return segs;
    }

    // ---- Exercise library (home equipment: 5/10/15 DBs, mini loop bands, ankle weights) ----
    function warmupDetail(){
      return '5 min: mini-band lateral walks + glute bridges + hip hinges + shoulder circles + squat-to-chair';
    }

    // Day 1
    function day1Exercises(){
      const squat = ex(
        'DB Front Squat (or Goblet)',
        'Use 2×15 or 1×15 goblet · 8–10 reps (not rushed). Leftover time: 5–10s bottom hold.'
      );
      const rdl = ex(
        'DB Romanian Deadlift',
        '2×15 · 8–10 reps · 3s lower + 1s pause at stretch. Leftover time: hinge hold.'
      );
      const press = ex(
        'DB Floor Press',
        '2×15 · 3s down + 1s pause on floor (this matched well for you). Stop 1–2 reps shy.'
      );
      const row = ex(
        'One‑Arm DB Row',
        '15 lb · 2s squeeze at top. If easy: 1.5 reps or 3s lower.'
      );
      const arnold = ex(
        'Arnold Press',
        '10–15 lb · slow lower + short pause (you liked this). Keep ribs down.'
      );
      const coreV = ex(
        'Core V Exercise',
        'Controlled reps. If too easy: add light ankle weights (0.5–2 lb/side).'
      );
      return { squat, rdl, press, row, arnold, coreV };
    }

    // Day 2
    function day2Exercises(){
      const lunge = ex(
        'Reverse Lunge (or Supported Split Squat)',
        'Use bodyweight or 5–15 lb. Short stride, shin comfy. Lightly hold chair/wall if needed.'
      );
      const slRdl = ex(
        'Single‑Leg RDL',
        '1×15 lb · 8–10 reps/side · slow + steady. Use chair for balance if needed.'
      );
      const pullApart = ex(
        'Mini‑Band Pull‑Apart / Row‑Apart',
        'Hold loop band and pull apart · 12–20 controlled reps. Squeeze upper back, no shrug.'
      );
      const push = ex(
        'Push‑ups (elevated if needed)',
        'Aim 6–15 reps. If time left: slow negatives or plank hold.'
      );
      const deadlift = ex(
        'DB Sumo Deadlift (or Hinge)',
        '2×15 · 8–10 reps. If time left: hinge hold 5–10s. Don’t rush reps.'
      );
      const sidePlank = ex(
        'Side Plank + Arm Rotations',
        'Slow rotations, stay stacked. Option: hold 5 lb DB for extra challenge.'
      );
      return { lunge, slRdl, pullApart, push, deadlift, sidePlank };
    }

    // Arms (end of both workouts)
    function armsExercises(){
      const curl = ex(
        'Seated DB Curls (chair)',
        'You felt this better: stay tall, elbows pinned. 10–12 reps, slow lower.'
      );
      const tri = ex(
        'DB Overhead Triceps Extension',
        'Use 1×15 lb (two hands) or 1×10 if needed. 10–12 reps, slow lower.'
      );
      // alt: skull crushers on floor with 10–15s if overhead bothers shoulders
      return { curl, tri };
    }

    // ---- Finishers (optional) ----
    function finisherDay1(){
      // One quick round to keep time reasonable (arms are after)
      const segs = [];
      segs.push(...transition(10, 'Finisher Setup', 'Quick setup for a short conditioning hit.'));
      segs.push(segment('Finisher: DB Swings / Fast Hip Hinge', 30, 'work', 'Use 1×15 lb or hinge fast without rounding back.'));
      segs.push(segment('Transition', 10, 'rest', 'Switch.'));
      segs.push(segment('Finisher: Side Plank (L)', 30, 'work', 'Stack hips/shoulders, breathe.'));
      segs.push(segment('Transition', 10, 'rest', 'Switch.'));
      segs.push(segment('Finisher: Side Plank (R)', 30, 'work', 'Stack hips/shoulders, breathe.'));
      return segs;
    }

    function finisherDay2(){
      const segs = [];
      segs.push(...transition(10, 'Finisher Setup', 'Quick 2–3 minute push before arms.'));
      segs.push(segment('Finisher: Squat-to-Chair', 40, 'work', 'Controlled reps, tap chair lightly.'));
      segs.push(segment('Transition', 10, 'rest', 'Switch.'));
      segs.push(segment('Finisher: Push-ups (or incline)', 30, 'work', 'Clean reps or slow negatives.'));
      segs.push(segment('Transition', 10, 'rest', 'Switch.'));
      segs.push(segment('Finisher: Mini‑Band Lateral Walks', 40, 'work', 'Band above knees/ankles. Small steps, constant tension.'));
      return segs;
    }

    // ---- Plans ----
    function planDay1(includeFinisher=true, includeArms=true){
      const segs = [];
      const d = day1Exercises();
      const a = armsExercises();

      segs.push(segment('Warm‑up', 5*60, 'other', warmupDetail()));
      segs.push(...supersetBlock(d.squat, d.rdl, 60, 30, 3));
      segs.push(...transition(30));
      segs.push(...supersetBlock(d.press, d.row, 60, 30, 3));
      segs.push(...transition(30));
      segs.push(...supersetBlock(d.arnold, d.coreV, 60, 30, 3));

      if (includeFinisher) segs.push(...finisherDay1());

      if (includeArms) {
        segs.push(...transition(10, 'Arms Setup', 'Grab dumbbells and a chair.'));
        segs.push(...armsFinisherBlock(a.curl, a.tri, 40, 20, 2));
      }

      return segs;
    }

    function planDay2(includeFinisher=true, includeArms=true){
      const segs = [];
      const d = day2Exercises();
      const a = armsExercises();

      segs.push(segment('Warm‑up', 5*60, 'other', warmupDetail()));
      segs.push(...supersetBlock(d.lunge, d.slRdl, 60, 30, 3));
      segs.push(...transition(30));
      segs.push(...supersetBlock(d.pullApart, d.push, 60, 30, 3));
      segs.push(...transition(30));
      segs.push(...supersetBlock(d.deadlift, d.sidePlank, 60, 30, 3));

      if (includeFinisher) segs.push(...finisherDay2());

      if (includeArms) {
        segs.push(...transition(10, 'Arms Setup', 'Grab dumbbells and a chair.'));
        segs.push(...armsFinisherBlock(a.curl, a.tri, 40, 20, 2));
      }

      return segs;
    }

    const plans = {
      'Day 1 — Strength + Core V': planDay1,
      'Day 2 — Balance + Conditioning': planDay2,
    };

    // ---- State ----
    let currentPlanName = Object.keys(plans)[0];
    let segments = [];
    let segIdx = 0;
    let remaining = 0;
    let running = false;
    let timer = null;

    // ---- DOM ----
    const planSelect = document.getElementById('planSelect');
    const finisherToggle = document.getElementById('finisherToggle');
    const armsToggle = document.getElementById('armsToggle');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resetBtn = document.getElementById('resetBtn');

    const currentTitle = document.getElementById('currentTitle');
    const currentDetail = document.getElementById('currentDetail');
    const nextTitle = document.getElementById('nextTitle');
    const phaseBadge = document.getElementById('phaseBadge');
    const timeLeft = document.getElementById('timeLeft');
    const segIndex = document.getElementById('segIndex');
    const segTotal = document.getElementById('segTotal');
    const progressBar = document.getElementById('progressBar');
    const segmentList = document.getElementById('segmentList');
    const totalTime = document.getElementById('totalTime');

    Object.keys(plans).forEach(name => {
      const opt = document.createElement('option');
      opt.value = name; opt.textContent = name;
      planSelect.appendChild(opt);
    });

    function fmt(s){
      const m = Math.floor(s/60);
      const sec = s % 60;
      return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
    }

    function totalDuration(){ return segments.reduce((a,b)=>a+b.seconds,0); }

    function buildSegments(){
      const withFinisher = finisherToggle.checked;
      const withArms = armsToggle.checked;

      segments = plans[currentPlanName](withFinisher, withArms);
      segIdx = 0;
      remaining = segments[0].seconds;
      updateUI();
      renderList();
    }

    function updateUI(){
      const seg = segments[segIdx] || {label:'Done', seconds:0, kind:'other', detail:''};

      currentTitle.textContent = seg.label;
      currentDetail.textContent = seg.detail || '';

      phaseBadge.textContent = seg.kind === 'work' ? 'Work' : (seg.kind === 'rest' ? 'Rest' : 'Other');
      phaseBadge.className = 'badge ' + (seg.kind==='work'?'work':seg.kind==='rest'?'rest':'other');

      timeLeft.textContent = fmt(Math.max(0, remaining));
      segIndex.textContent = Math.min(segIdx+1, segments.length);
      segTotal.textContent = segments.length;

      const segSeconds = segments[segIdx]?.seconds ?? 0;
      const done = segments.slice(0, segIdx).reduce((a,b)=>a+b.seconds,0) + Math.max(0, segSeconds - remaining);

      const pct = Math.max(0, Math.min(100, (done/Math.max(1,totalDuration()))*100));
      progressBar.style.width = pct + '%';

      const next = segments[segIdx+1];
      nextTitle.textContent = next ? `${next.label} (${fmt(next.seconds)})` : 'Complete';

      totalTime.textContent = `${fmt(done)} / ${fmt(totalDuration())}`;

      Array.from(segmentList.children).forEach((el,i)=>{
        el.style.opacity = i===segIdx ? '1' : (i<segIdx ? 0.45 : 0.9);
        el.style.borderLeft = i===segIdx ? '4px solid var(--accent)' : '4px solid transparent';
        el.style.background = i===segIdx ? 'rgba(113,229,189,0.08)' : 'transparent';
      });
    }

    function renderList(){
      segmentList.innerHTML = '';
      segments.forEach((s,i)=>{
        const row = document.createElement('div');
        row.className = 'item';

        const dot = document.createElement('div');
        dot.className = 'dot';
        row.appendChild(dot);

        const text = document.createElement('div');
        const detailLine = s.detail ? `<div class="small muted" style="margin-top:2px">${s.detail}</div>` : '';
        text.innerHTML = `
          <div style="font-weight:800">${s.label}</div>
          ${detailLine}
          <div class="small muted" style="margin-top:2px">${fmt(s.seconds)} · ${s.kind.toUpperCase()}</div>
        `;
        row.appendChild(text);

        segmentList.appendChild(row);
      });
    }

    function tick(){
      if (!running) return;
      remaining -= 1;

      if (remaining <= 0){
        tone(180, segments[segIdx]?.kind==='work' ? 1046 : 784, 'sine', 0.25);
        segIdx += 1;

        if (segIdx >= segments.length){
          running = false;
          clearInterval(timer);
          updateUI();
          tone(500, 660, 'sine', 0.3);
          setTimeout(()=>tone(600, 880, 'sine', 0.3), 100);
          return;
        }
        remaining = segments[segIdx].seconds;
      }
      updateUI();
    }

    function start(){ if (running) return; running = true; timer = setInterval(tick, 1000); }
    function pause(){ running = false; clearInterval(timer); }
    function reset(){ pause(); buildSegments(); }

    planSelect.addEventListener('change', (e)=>{ currentPlanName = e.target.value; reset(); });
    finisherToggle.addEventListener('change', reset);
    armsToggle.addEventListener('change', reset);

    startBtn.addEventListener('click', start);
    pauseBtn.addEventListener('click', pause);
    resetBtn.addEventListener('click', reset);

    planSelect.value = currentPlanName;
    buildSegments();
  </script>
</body>
</html>
